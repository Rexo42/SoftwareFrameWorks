<app-nav-bar></app-nav-bar>

<div class="container mt-4">
  <div class="row">
    <!-- Group List Sidebar -->
<div class="col-md-3">
  <div class="border p-2" style="height: 300px; overflow-y: auto; background-color: #e9ecef;">
    <h6 class="text-center">Groups</h6>
    <ul class="list-group">
      <li *ngFor="let group of groups; let i = index" class="list-group-item py-1">
        <strong>{{ group }}</strong>
        <ul class="list-group">
          <li *ngFor="let channel of channels[i]" class="list-group-item py-1 d-flex justify-content-between align-items-center clickable" (click)="onChannelClick(channel)">
              {{ channel }}
            <span *ngIf="channel == channelName; else redDot" style="font-size: 16px;">
              ðŸ”µ
            </span>
            <ng-template #redDot>
              <span style="font-size: 16px;">
                ðŸ”´
              </span>
            </ng-template>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</div>

    <!-- Chat Section (Middle Column) -->
    <div [ngClass]="userRole === 'SuperAdmin' ? 'col-md-7' : 'col-md-8 mx-auto'" *ngIf="channelName != 'Not Connected'">
      <div>
        <strong>Channel:</strong> {{ channelName }}
      </div>
      
      <!-- Scrollable Chat Messages -->
      <div #scrollContainer
           class="border p-3 mb-3"
           style="height: 300px; overflow-y: auto; background-color: #f8f9fa;">
        <div *ngFor="let msg of messages">
          <p class="mb-1">
            ({{ msg.getFormattedTime() }}) {{ msg.sender }}: {{ msg.message }}
          </p>
        </div>
      </div>

      <!-- Message Input Form -->
      <form (ngSubmit)="sendMessage()">
        <div class="mb-3">
          <label for="message" class="form-label">Message:</label>
          <input
            type="text"
            id="message"
            name="message"
            class="form-control"
            [(ngModel)]="message"
            placeholder="Enter your message"
            required>
        </div>
        <div class="d-grid">
          <button type="submit" class="btn btn-primary">Send</button>
        </div>
      </form>
    </div>
  </div>
</div>