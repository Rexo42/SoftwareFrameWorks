<!-- <app-nav-bar></app-nav-bar>

<div class="container mt-4">
  <div class="row">
<div class="col-md-3">
  <div class="border p-2" style="height: 500px; overflow-y: auto; background-color: #e9ecef;">
    <h6 class="text-center">Groups</h6>
    <ul class="list-group">
      <li *ngFor="let group of groups; let i = index" class="list-group-item py-1">
        <strong>{{ group }}</strong>
        <ul class="list-group">
          <li *ngFor="let channel of channels[i]" class="list-group-item py-1 d-flex justify-content-between align-items-center clickable" (click)="onChannelClick(channel,group)">
              {{ channel }}
            <span *ngIf="channel == channelName && group == groupName ; else redDot" style="font-size: 16px;">
              ðŸ”µ
            </span>
            <ng-template #redDot>
              <span style="font-size: 16px;">
                ðŸ”´
              </span>
            </ng-template>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</div>

    <div [ngClass]="userRole === 'SuperAdmin' ? 'col-md-7' : 'col-md-8 mx-auto'" *ngIf="channelName != 'Not Connected'">
      <div>
        <strong>Channel:</strong> {{ channelName }}
      </div>
      
      <div #scrollContainer
           class="border p-3 mb-3"
           style="height: 300px; overflow-y: auto; background-color: #f8f9fa;">
        <div *ngFor="let msg of messages">
          <p class="mb-1">
           <img *ngIf="msg.profilePicture != 'notification-Join' && msg.profilePicture != 'notification-Leave'" [src]="'http://localhost:3000/uploads/' + msg.profilePicture" alt="Profile Picture" class="profile-picture" />
            <span *ngIf="msg.profilePicture =='notification-Join' " style="font-size: 16px;">ðŸ”µ</span>
            <span *ngIf="msg.profilePicture =='notification-Leave' " style="font-size: 16px;">ðŸ”´</span>
           ({{msg.timeStamp}}) {{msg.username}}: {{msg.message}}
          </p>
        </div>
      </div>

      <form (ngSubmit)="sendMessage()">
        <div class="mb-3">
          <label for="message" class="form-label">Message:</label>
          <input
            type="text"
            id="message"
            name="message"
            class="form-control"
            [(ngModel)]="message"
            placeholder="Enter your message"
            required>
        </div>
        <div class="d-grid">
          <button type="submit" class="btn btn-primary">Send</button>
        </div>
      </form>
    </div>
  </div>
</div> -->
<div class="chatroom-dark">
  <app-nav-bar></app-nav-bar>

  <div class="container-fluid mt-4">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-md-3 sidebar">
        <h6 class="text-center">Groups</h6>
        <ul class="list-group">
          <li *ngFor="let group of groups; let i = index" class="list-group-item group-item">
            <strong>{{ group }}</strong>
            <ul class="list-group">
              <li *ngFor="let channel of channels[i]"
                  class="list-group-item channel-item d-flex justify-content-between align-items-center clickable"
                  (click)="onChannelClick(channel, group)">
                {{ channel }}
                <span *ngIf="channel == channelName && group == groupName; else redDot">ðŸ”µ</span>
                <ng-template #redDot>ðŸ”´</ng-template>
              </li>
            </ul>
          </li>
        </ul>
      </div>

      <!-- Chat Area -->
      <div [ngClass]="userRole === 'SuperAdmin' ? 'col-md-7 chat-area' : 'col-md-8 mx-auto chat-area'"
           *ngIf="channelName != 'Not Connected'">
        <div class="channel-header">
          <strong>Channel:</strong> {{ channelName }}
        </div>

        <div #scrollContainer class="message-container">
          <div *ngFor="let msg of messages" class="message">
            <img *ngIf="msg.profilePicture != 'notification-Join' && msg.profilePicture != 'notification-Leave'"
                 [src]="'http://localhost:3000/uploads/' + msg.profilePicture"
                 alt="Profile Picture"
                 class="profile-picture" />
            <span *ngIf="msg.profilePicture == 'notification-Join'">ðŸ”µ</span>
            <span *ngIf="msg.profilePicture == 'notification-Leave'">ðŸ”´</span>
            <span class="timestamp">({{ msg.timeStamp }})</span>
            <span class="username">{{ msg.username }}</span>:
            <span class="text">{{ msg.message }}</span>
          </div>
        </div>

        <form (ngSubmit)="sendMessage()" class="message-form">
          <div class="mb-3">
            <input type="text"
                   id="message"
                   name="message"
                   class="form-control"
                   [(ngModel)]="message"
                   placeholder="Message #{{ channelName }}"
                   required>
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-discord">Send</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>