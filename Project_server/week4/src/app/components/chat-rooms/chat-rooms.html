<app-nav-bar></app-nav-bar>

<div class="container mt-4">
  <div class="row">
      <!-- Group List Sidebar -->
    <div class="col-md-2">
      <div class="border p-2" style="height: 300px; overflow-y: auto; background-color: #e9ecef;">
        <h6 class="text-center">Groups</h6>
        <ul class="list-group">
          <li *ngFor="let group of groups" class="list-group-item py-1">
            {{ group }}
          </li>
        </ul>
      </div>
    </div>
    <!-- If user is SuperAdmin, show chat in 7 columns -->
    <div
      [ngClass]="userRole === 'SuperAdmin' ? 'col-md-7' : 'col-md-6 mx-auto'"
    >
      <!-- Scrollable Chat Messages -->
       <div>
        Channel: {{channelName}}
       </div>
      <div #scrollContainer
           class="border p-3 mb-3"
           style="height: 300px; overflow-y: auto; background-color: #f8f9fa;">
        <div *ngFor="let msg of messages">
          <p class="mb-1">
            ({{ msg.getFormattedTime() }}) {{ msg.sender }}: {{ msg.message }}
          </p>
        </div>
      </div>

      <!-- Message Input Form -->
      <form (ngSubmit)="sendMessage()">
        <div class="mb-3">
          <label for="message" class="form-label">Message:</label>
          <input
            type="text"
            id="message"
            name="message"
            class="form-control"
            [(ngModel)]="message"
            placeholder="Enter your message"
            required>
        </div>
        <div class="d-grid">
          <button type="submit" class="btn btn-primary">Send</button>
        </div>
      </form>
    </div>

    <!-- Create Account (right column if SuperAdmin) -->
    <div *ngIf="userRole === 'SuperAdmin'" class="col-md-5">
      <app-create-account></app-create-account>
    </div>
    <div *ngIf="userRole === 'SuperAdmin'" class="col-md-5">
      <div class="container mt-4">
        <div class="card">
          <div class="card-header">
            <h5>Create New Group</h5>
          </div>
          <div class="card-body">
            <form (ngSubmit)="createGroup()">
              <div class="mb-3">
                <label for="groupName" class="form-label">Group Name</label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="groupName" 
                  [(ngModel)]="groupName" 
                  name="groupName" 
                  placeholder="Enter group name"
                  required
                />
              </div>
              <button type="submit" class="btn btn-primary">Create Group</button>
            </form>
          </div>
        </div>
    </div>


      
    </div>
  </div>
</div>